const l={invoice:"https://n8n.srv987649.hstgr.cloud/webhook/a043e005-7e94-42cc-b210-83c52ff908d6",ga:"https://n8n.srv987649.hstgr.cloud/webhook/GA",kdr:"https://n8n.srv987649.hstgr.cloud/webhook/ReportGenerator",kdrInvoice:"https://n8n.srv987649.hstgr.cloud/webhook/KDRsInvoiceProcessing",kdrSellout:"https://n8n.srv987649.hstgr.cloud/webhook/SelloutReport"};async function m(c,t){const i=l[c];try{const a=Array.isArray(t.attachments)&&t.attachments.some(e=>!!e.file),r={method:"POST",mode:"cors"};if(a){const e=new FormData;e.append("sender",t.sender),e.append("module",t.module),e.append("text",t.text),e.append("conversationId",String(t.conversationId??"")),(t.attachments||[]).forEach((n,d)=>{n.file&&e.append("files",n.file,n.name||`file-${d}`)}),e.append("attachments",JSON.stringify((t.attachments||[]).map(n=>({name:n.name,type:n.type,size:n.size,url:n.url})))),r.body=e}else r.headers={"Content-Type":"application/json",Accept:"application/json"},r.body=JSON.stringify(t);const o=await fetch(i,r).catch(()=>null);if(!o||!o.ok)return{text:"Service unavailable"};const s=await o.json().catch(async()=>({text:await o.text()})),h=typeof(s.reply??s.text)=="string"?s.reply??s.text:JSON.stringify(s),p=Array.isArray(s.attachments)?s.attachments:[];return{text:h,attachments:p}}catch{return null}}export{m as sendChat};
