const p={invoice:"https://n8n.srv987649.hstgr.cloud/webhook/a043e005-7e94-42cc-b210-83c52ff908d6",ga:"https://n8n.srv987649.hstgr.cloud/webhook/GA",kdr:"https://n8n.srv1009033.hstgr.cloud/webhook/24e9013e-ec7b-4a16-8fdf-745c239e84cb",kdrInvoice:"https://n8n.srv987649.hstgr.cloud/webhook/c5cd89d2-e170-4f2e-b495-d86390f96bad",kdrSellout:"https://n8n.srv987649.hstgr.cloud/webhook/e8505b44-00f0-440a-a6a4-c545f0389f27"};async function l(o,t){const a=p[o];try{const i=Array.isArray(t.attachments)&&t.attachments.some(e=>!!e.file),c={method:"POST",mode:"cors"};if(i){const e=new FormData;e.append("sender",t.sender),e.append("module",t.module),e.append("text",t.text),e.append("conversationId",String(t.conversationId??"")),(t.attachments||[]).forEach((n,f)=>{n.file&&e.append("files",n.file,n.name||`file-${f}`)}),e.append("attachments",JSON.stringify((t.attachments||[]).map(n=>({name:n.name,type:n.type,size:n.size,url:n.url})))),c.body=e}else c.headers={"Content-Type":"application/json",Accept:"application/json"},c.body=JSON.stringify(t);const r=await fetch(a,c).catch(()=>null);if(!r||!r.ok)return{text:"Service unavailable"};const s=await r.json().catch(async()=>({text:await r.text()})),h=typeof(s.reply??s.text)=="string"?s.reply??s.text:JSON.stringify(s),d=Array.isArray(s.attachments)?s.attachments:[];return{text:h,attachments:d}}catch{return null}}export{l as sendChat};
